# Document Query Answerer - Environment Variables
# Copy this file to .env and update values as needed
# Environment variables use double underscore (__) for nested settings

# ============================================================================
# Application Settings
# ============================================================================
APP__NAME=Document Query Answerer
APP__VERSION=1.0.0
APP__MODE=async
APP__MAX_CONCURRENT_REQUESTS=10
APP__REQUEST_TIMEOUT=300

# Environment (development, staging, production)
ENV=development

# ============================================================================
# PDF Parser Settings
# ============================================================================
# Options: pdfplumber, pymupdf, unstructured
PDF_PARSER__TYPE=pdfplumber

# ============================================================================
# Chunking Settings
# ============================================================================
# Options: fixed, sentence, hierarchical, sliding_window, semantic
CHUNKING__STRATEGY=hierarchical
CHUNKING__CHUNK_SIZE=512
CHUNKING__CHUNK_OVERLAP=50
CHUNKING__PRESERVE_STRUCTURE=true

# ============================================================================
# Embedding Settings
# ============================================================================
# Options: nomic_embed
EMBEDDINGS__TYPE=nomic_embed
EMBEDDINGS__MODEL_NAME=nomic-embed-text-v1
EMBEDDINGS__DEVICE=cpu
EMBEDDINGS__BATCH_SIZE=32
EMBEDDINGS__DIMENSION=768

# ============================================================================
# Vector Database Settings
# ============================================================================
# Options: chroma, faiss
VECTOR_DB__TYPE=chroma
VECTOR_DB__PERSIST_DIRECTORY=./data/vector_db
VECTOR_DB__COLLECTION_NAME=financial_documents
# Options: cosine, euclidean, manhattan
VECTOR_DB__DISTANCE_METRIC=cosine

# ============================================================================
# Query Answering Settings
# ============================================================================
# Options: direct_retrieval, rag, multi_query
QUERY_ANSWERING__STRATEGY=rag
QUERY_ANSWERING__TOP_K=5
QUERY_ANSWERING__SIMILARITY_THRESHOLD=0.3

# LLM Settings (Ollama)
QUERY_ANSWERING__LLM__PROVIDER=ollama
QUERY_ANSWERING__LLM__MODEL=mistral:7b-instruct
# For local development: http://localhost:11434
# For Docker: http://ollama:11434
QUERY_ANSWERING__LLM__BASE_URL=http://ollama:11434
QUERY_ANSWERING__LLM__TEMPERATURE=0.0
QUERY_ANSWERING__LLM__MAX_TOKENS=512
QUERY_ANSWERING__LLM__TIMEOUT=60

# ============================================================================
# Gatekeeping Settings
# ============================================================================
GATEKEEPING__ENABLED=true
GATEKEEPING__THRESHOLD=0.3
GATEKEEPING__REJECTION_MESSAGE=This query does not appear to be related to the document.

# ============================================================================
# Queue Settings (Celery/Redis)
# ============================================================================
# For local development: redis://localhost:6379/0
# For Docker: redis://redis:6379/0
QUEUE__BROKER=redis://redis:6379/0
QUEUE__RESULT_BACKEND=redis://redis:6379/0
QUEUE__WORKER_CONCURRENCY=4
QUEUE__TASK_TIME_LIMIT=300

# ============================================================================
# Storage Settings
# ============================================================================
# Options: local, s3 (if implemented)
STORAGE__TYPE=local
STORAGE__UPLOAD_DIRECTORY=./data/uploads
STORAGE__MAX_FILE_SIZE_MB=50

# ============================================================================
# Database Settings
# ============================================================================
# SQLite (default for local)
DATABASE__URL=sqlite:///./data/metadata.db
# PostgreSQL example (if needed):
# DATABASE__URL=postgresql://user:password@localhost:5432/document_qa
# MySQL example (if needed):
# DATABASE__URL=mysql://user:password@localhost:3306/document_qa
DATABASE__ECHO=false

# ============================================================================
# Logging Settings
# ============================================================================
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOGGING__LEVEL=INFO
# Options: json, text
LOGGING__FORMAT=json
LOGGING__FILE=./logs/app.log

# ============================================================================
# Docker/Service URLs (used in docker-compose)
# ============================================================================
# Ollama service URL
OLLAMA_HOST=ollama:11434
# For local development outside Docker:
# OLLAMA_HOST=localhost:11434

# Redis service URL (if needed for direct connections)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ============================================================================
# API Settings
# ============================================================================
# FastAPI host and port
API_HOST=0.0.0.0
API_PORT=8000

# CORS settings (if needed)
# CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ============================================================================
# Security Settings (if needed in future)
# ============================================================================
# API_KEY=your-api-key-here
# SECRET_KEY=your-secret-key-here

# ============================================================================
# Optional: External Service Credentials
# ============================================================================
# AWS S3 (if using S3 storage)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-bucket-name

# OpenAI (if switching from Ollama)
# OPENAI_API_KEY=your-openai-api-key
# OPENAI_MODEL=gpt-4

# ============================================================================
# Development/Testing Settings
# ============================================================================
# Set to true to enable debug mode
DEBUG=false

# Test database URL (for running tests)
# TEST_DATABASE_URL=sqlite:///./data/test_metadata.db
